"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[26],{"./node_modules/@apollo/client/react/hooks/useMutation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>useMutation});var tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),rehackt__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rehackt/index.js"),_utilities_index_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@apollo/client/utilities/common/mergeOptions.js"),_wry_equality__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@wry/equality/lib/index.js"),_parser_index_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@apollo/client/react/parser/index.js"),_errors_index_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@apollo/client/errors/index.js"),_useApolloClient_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@apollo/client/react/hooks/useApolloClient.js");function useMutation(mutation,options){var client=(0,_useApolloClient_js__WEBPACK_IMPORTED_MODULE_2__.m)(null==options?void 0:options.client);(0,_parser_index_js__WEBPACK_IMPORTED_MODULE_3__.D$)(mutation,_parser_index_js__WEBPACK_IMPORTED_MODULE_3__.KG.Mutation);var _a=rehackt__WEBPACK_IMPORTED_MODULE_0__.useState({called:!1,loading:!1,client}),result=_a[0],setResult=_a[1],ref=rehackt__WEBPACK_IMPORTED_MODULE_0__.useRef({result,mutationId:0,isMounted:!0,client,mutation,options});Object.assign(ref.current,{client,options,mutation});var execute=rehackt__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(executeOptions){void 0===executeOptions&&(executeOptions={});var _a=ref.current,options=_a.options,mutation=_a.mutation,baseOptions=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.Cl)({},options),{mutation}),client=executeOptions.client||ref.current.client;ref.current.result.loading||baseOptions.ignoreResults||!ref.current.isMounted||setResult(ref.current.result={loading:!0,error:void 0,data:void 0,called:!0,client});var mutationId=++ref.current.mutationId,clientOptions=(0,_utilities_index_js__WEBPACK_IMPORTED_MODULE_5__.l)(baseOptions,executeOptions);return client.mutate(clientOptions).then((function(response){var _a,_b,data=response.data,errors=response.errors,error=errors&&errors.length>0?new _errors_index_js__WEBPACK_IMPORTED_MODULE_6__.K4({graphQLErrors:errors}):void 0,onError=executeOptions.onError||(null===(_a=ref.current.options)||void 0===_a?void 0:_a.onError);if(error&&onError&&onError(error,clientOptions),mutationId===ref.current.mutationId&&!clientOptions.ignoreResults){var result_1={called:!0,loading:!1,data,error,client};ref.current.isMounted&&!(0,_wry_equality__WEBPACK_IMPORTED_MODULE_1__.L)(ref.current.result,result_1)&&setResult(ref.current.result=result_1)}var onCompleted=executeOptions.onCompleted||(null===(_b=ref.current.options)||void 0===_b?void 0:_b.onCompleted);return error||null==onCompleted||onCompleted(response.data,clientOptions),response})).catch((function(error){var _a;if(mutationId===ref.current.mutationId&&ref.current.isMounted){var result_2={loading:!1,error,data:void 0,called:!0,client};(0,_wry_equality__WEBPACK_IMPORTED_MODULE_1__.L)(ref.current.result,result_2)||setResult(ref.current.result=result_2)}var onError=executeOptions.onError||(null===(_a=ref.current.options)||void 0===_a?void 0:_a.onError);if(onError)return onError(error,clientOptions),{data:void 0,errors:error};throw error}))}),[]),reset=rehackt__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(){if(ref.current.isMounted){var result_3={called:!1,loading:!1,client};Object.assign(ref.current,{mutationId:0,result:result_3}),setResult(result_3)}}),[]);return rehackt__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return ref.current.isMounted=!0,function(){ref.current.isMounted=!1}}),[]),[execute,(0,tslib__WEBPACK_IMPORTED_MODULE_4__.Cl)({reset},result)]}},"./src/chunks/(authenticated)/Header/HeaderAuth/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>HeaderAuth});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),useApolloClient=__webpack_require__("./node_modules/@apollo/client/react/hooks/useApolloClient.js"),navigation=__webpack_require__("./node_modules/next/navigation.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),local=__webpack_require__("./src/data/local.ts"),auth=__webpack_require__("./src/data/auth.ts");function HeaderAuth(){const h=function useHeaderAuth(){const router=(0,navigation.useRouter)(),client=(0,useApolloClient.m)(),authUser=(0,auth.ZY)(),[menuVisible,setMenuVisible]=(0,react.useState)(!1);return{authUser,logOut:async()=>{router.push("/login"),await client.resetStore(),await(0,local.Z5)()},menuVisible,toggleMenu:()=>setMenuVisible(!menuVisible)}}();if(h.authUser)return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[h.menuVisible&&(0,jsx_runtime.jsx)("div",{onClick:h.toggleMenu,className:"fixed left-0 top-0 z-10 h-screen w-screen cursor-pointer bg-[#00000088]"}),(0,jsx_runtime.jsx)("button",{onClick:h.toggleMenu,className:"mx-2 grid size-9 place-items-center rounded-full bg-violet-800 font-bold",children:h.authUser.name[0]}),(0,jsx_runtime.jsxs)("div",{role:"menu",className:classnames_default()("absolute right-0 z-20 my-2 w-64 overflow-hidden rounded-lg bg-neutral-700 shadow-lg transition-opacity",h.menuVisible?"h-max":"h-0 opacity-0"),children:[(0,jsx_runtime.jsxs)("div",{className:"border-b border-light p-4",children:[(0,jsx_runtime.jsx)("div",{className:"text-xl font-bold",children:h.authUser.name}),(0,jsx_runtime.jsx)("div",{className:"text-neutral-400",children:h.authUser.email})]}),(0,jsx_runtime.jsx)("div",{className:"flex flex-col",children:(0,jsx_runtime.jsx)("button",{role:"menuitem",className:"p-4 text-center hover:bg-accent",onClick:h.logOut,children:"Log out"})})]})]})}HeaderAuth.__docgenInfo={description:"",methods:[],displayName:"HeaderAuth"}},"./src/chunks/(authenticated)/Header/HeaderAuth/stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/chunks/(authenticated)/Header/HeaderAuth/index.tsx");const Primary={},__WEBPACK_DEFAULT_EXPORT__={component:_index__WEBPACK_IMPORTED_MODULE_1__.A,tags:["autodocs"],decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"static grid h-72 place-items-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})})]}},"./src/data/auth.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CR:()=>useRegisterUser,ZY:()=>useAuthUser,vz:()=>useLogin});var _apollo_client__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@apollo/client/react/hooks/useQuery.js"),_apollo_client__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@apollo/client/react/hooks/useMutation.js"),_data_gql_auth__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/data/gql/auth.ts");function useAuthUser(){var _res_data;return null===(_res_data=(0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.I)(_data_gql_auth__WEBPACK_IMPORTED_MODULE_0__.Jd).data)||void 0===_res_data?void 0:_res_data.authUser}function useLogin(){const[mutation]=(0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.n)(_data_gql_auth__WEBPACK_IMPORTED_MODULE_0__.bd);return async credentials=>mutation({variables:{credentials}})}function useRegisterUser(){const[mutation]=(0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.n)(_data_gql_auth__WEBPACK_IMPORTED_MODULE_0__.V5);return async user=>mutation({variables:{user}})}},"./src/data/local.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NE:()=>setLocalItem,Z5:()=>clearLocalItems,nR:()=>getLocalItem});var idb_keyval__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/idb-keyval/dist/index.js");async function getLocalItem(key){return idb_keyval__WEBPACK_IMPORTED_MODULE_0__.Jt(key)}async function setLocalItem(key,val){return idb_keyval__WEBPACK_IMPORTED_MODULE_0__.hZ(key,val)}async function clearLocalItems(){return idb_keyval__WEBPACK_IMPORTED_MODULE_0__.IU()}},"./node_modules/idb-keyval/dist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function promisifyRequest(request){return new Promise(((resolve,reject)=>{request.oncomplete=request.onsuccess=()=>resolve(request.result),request.onabort=request.onerror=()=>reject(request.error)}))}let defaultGetStoreFunc;function defaultGetStore(){return defaultGetStoreFunc||(defaultGetStoreFunc=function createStore(dbName,storeName){const request=indexedDB.open(dbName);request.onupgradeneeded=()=>request.result.createObjectStore(storeName);const dbp=promisifyRequest(request);return(txMode,callback)=>dbp.then((db=>callback(db.transaction(storeName,txMode).objectStore(storeName))))}("keyval-store","keyval")),defaultGetStoreFunc}function get(key,customStore=defaultGetStore()){return customStore("readonly",(store=>promisifyRequest(store.get(key))))}function set(key,value,customStore=defaultGetStore()){return customStore("readwrite",(store=>(store.put(value,key),promisifyRequest(store.transaction))))}function clear(customStore=defaultGetStore()){return customStore("readwrite",(store=>(store.clear(),promisifyRequest(store.transaction))))}__webpack_require__.d(__webpack_exports__,{IU:()=>clear,Jt:()=>get,hZ:()=>set})}}]);