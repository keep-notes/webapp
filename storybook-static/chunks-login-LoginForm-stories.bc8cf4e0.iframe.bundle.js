"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[55],{"./src/chunks/login/LoginForm/stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,default:()=>stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");const LoginForm_fields=[{label:"Email address",name:"email",inputProps:{type:"email",autoComplete:"email"}},{label:"Password",name:"password",inputProps:{type:"password",autoComplete:"current-password"}}];var errors=__webpack_require__("./node_modules/@apollo/client/errors/index.js"),yup=__webpack_require__("./node_modules/@hookform/resolvers/yup/dist/yup.mjs"),navigation=__webpack_require__("./node_modules/next/navigation.js"),notistack_esm=__webpack_require__("./node_modules/notistack/notistack.esm.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),yup_index_esm=__webpack_require__("./node_modules/yup/index.esm.js"),auth=__webpack_require__("./src/data/auth.ts"),local=__webpack_require__("./src/data/local.ts");var Button=__webpack_require__("./src/components/Button/index.tsx"),Card=__webpack_require__("./src/components/Card/index.tsx"),StyledLink=__webpack_require__("./src/components/StyledLink/index.tsx"),TextInput=__webpack_require__("./src/components/TextInput/index.tsx");function LoginForm(){const h=function useLoginForm(){const{enqueueSnackbar}=(0,notistack_esm.dh)(),router=(0,navigation.useRouter)(),login=(0,auth.vz)(),[loading,setLoading]=(0,react.useState)(!1),form=(0,index_esm.mN)({mode:"onBlur",resolver:(0,yup.t)(yup_index_esm.Ik({email:yup_index_esm.Yj().email().required().label("Email address"),password:yup_index_esm.Yj().required().label("Password")}).required())}),onSubmit=form.handleSubmit((async input=>{try{setLoading(!0);const resp=await login(input);await(0,local.NE)("authToken",resp.data.login.token),router.push("/")}catch(error){if(!(error instanceof errors.K4))throw error;enqueueSnackbar(error.message)}finally{setLoading(!1)}}));return{form,loading,onSubmit}}();return(0,jsx_runtime.jsxs)(Card.A,{className:"flex flex-col gap-6 md:min-w-96 lg:grid lg:w-[60em] lg:grid-cols-2 lg:items-center",children:[(0,jsx_runtime.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:h.onSubmit,children:[(0,jsx_runtime.jsx)("h1",{className:"text-lg font-bold",children:"Sign in"}),(0,jsx_runtime.jsx)("div",{className:"flex flex-col gap-4",children:LoginForm_fields.map((field=>{var _h_form_formState_errors_field_name,_h_form_formState_errors;return(0,jsx_runtime.jsx)(TextInput.A,{label:field.label,_input:{...field.inputProps,...h.form.register(field.name)},error:null===(_h_form_formState_errors=h.form.formState.errors)||void 0===_h_form_formState_errors||null===(_h_form_formState_errors_field_name=_h_form_formState_errors[field.name])||void 0===_h_form_formState_errors_field_name?void 0:_h_form_formState_errors_field_name.message},field.name)}))}),(0,jsx_runtime.jsx)(Button.A,{type:"submit",variant:"solid",disabled:h.loading,children:"Sign in"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,jsx_runtime.jsx)("div",{children:"or"}),(0,jsx_runtime.jsx)(StyledLink.A,{href:"/register",className:"text-xl font-semibold",children:"Create an account"}),(0,jsx_runtime.jsx)("div",{children:"if you don't already have one"})]})]})}LoginForm.__docgenInfo={description:"",methods:[],displayName:"LoginForm"};const Primary={},stories={component:LoginForm,tags:["autodocs"],parameters:{layout:"centered"}}},"./src/components/Button/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Button});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);function Button(param){let{className,variant="ghost",...props}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("inline-grid h-10 place-items-center whitespace-nowrap rounded-md px-4 text-sm font-medium transition-colors","hover:brightness-90 disabled:pointer-events-none disabled:opacity-50",className,{"hover:bg-accent":"ghost"===variant,"bg-primary text-dark":"solid"===variant}),...props})}Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{variant:{required:!1,tsType:{name:"union",raw:"'ghost' | 'solid'",elements:[{name:"literal",value:"'ghost'"},{name:"literal",value:"'solid'"}]},description:"",defaultValue:{value:"'ghost'",computed:!1}}},composes:["ButtonHTMLAttributes"]}},"./src/components/Card/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Card});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);function Card(param){let{className,...props}=param;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("rounded-lg border border-light p-8",className),...props})}Card.__docgenInfo={description:"",methods:[],displayName:"Card"}},"./src/components/StyledLink/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>StyledLink});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),next_link__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/link.js"),next_link__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_2__);function StyledLink(param){let{className,...props}=param;var _props_href;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_link__WEBPACK_IMPORTED_MODULE_2___default(),{title:null===(_props_href=props.href)||void 0===_props_href?void 0:_props_href.toString(),className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("text-primary underline hover:brightness-75",className),...props})}StyledLink.__docgenInfo={description:"",methods:[],displayName:"StyledLink",props:{className:{required:!1,tsType:{name:"HTMLAttributes['className']",raw:"HTMLAttributes<'a'>['className']"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}},composes:["LinkProps"]}},"./src/components/TextBox/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);const TextBox=(0,__webpack_require__("./node_modules/next/dist/compiled/react/index.js").forwardRef)(((param,ref)=>{let{asChild=!1,className,type,variant="bordered",...props}=param;const Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__.DX:"input";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{type,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("flex h-10 w-full items-center bg-transparent px-3",{"rounded-md border border-light py-2":"bordered"===variant,"placeholder:font-bold placeholder:text-neutral-400 focus:outline-none":"ghost"===variant},className),ref,...props})}));TextBox.displayName="TextBox";const __WEBPACK_DEFAULT_EXPORT__=TextBox;TextBox.__docgenInfo={description:"",methods:[],displayName:"TextBox",props:{variant:{required:!1,tsType:{name:"union",raw:"'bordered' | 'ghost'",elements:[{name:"literal",value:"'bordered'"},{name:"literal",value:"'ghost'"}]},description:"",defaultValue:{value:"'bordered'",computed:!1}},asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["ComponentProps"]}},"./src/components/TextInput/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>TextInput});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_TextBox__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/TextBox/index.tsx");function TextInput(props){const id=(0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"".concat(id,"textBox"),className:"text-sm text-neutral-400",children:props.label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_TextBox__WEBPACK_IMPORTED_MODULE_2__.A,{id:"".concat(id,"textBox"),...props._input}),props.error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm text-red-300",children:props.error})]})}TextInput.__docgenInfo={description:"",methods:[],displayName:"TextInput",props:{label:{required:!0,tsType:{name:"string"},description:"Visual label for the text box"},error:{required:!1,tsType:{name:"string"},description:"Error message to be rendered below the text box"},_input:{required:!1,tsType:{name:"ComponentProps",elements:[{name:"literal",value:"'input'"}],raw:"ComponentProps<'input'>"},description:"props for the text box component"}}}},"./src/data/auth.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CR:()=>useRegisterUser,ZY:()=>useAuthUser,vz:()=>useLogin});var _apollo_client__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@apollo/client/react/hooks/useQuery.js"),_apollo_client__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@apollo/client/react/hooks/useMutation.js"),_data_gql_auth__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/data/gql/auth.ts");function useAuthUser(){var _res_data;return null===(_res_data=(0,_apollo_client__WEBPACK_IMPORTED_MODULE_1__.I)(_data_gql_auth__WEBPACK_IMPORTED_MODULE_0__.Jd).data)||void 0===_res_data?void 0:_res_data.authUser}function useLogin(){const[mutation]=(0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.n)(_data_gql_auth__WEBPACK_IMPORTED_MODULE_0__.bd);return async credentials=>mutation({variables:{credentials}})}function useRegisterUser(){const[mutation]=(0,_apollo_client__WEBPACK_IMPORTED_MODULE_2__.n)(_data_gql_auth__WEBPACK_IMPORTED_MODULE_0__.V5);return async user=>mutation({variables:{user}})}},"./src/data/local.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NE:()=>setLocalItem,Z5:()=>clearLocalItems,nR:()=>getLocalItem});var idb_keyval__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/idb-keyval/dist/index.js");async function getLocalItem(key){return idb_keyval__WEBPACK_IMPORTED_MODULE_0__.Jt(key)}async function setLocalItem(key,val){return idb_keyval__WEBPACK_IMPORTED_MODULE_0__.hZ(key,val)}async function clearLocalItems(){return idb_keyval__WEBPACK_IMPORTED_MODULE_0__.IU()}}}]);